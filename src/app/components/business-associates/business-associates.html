<style>


  .table-responsive {
  overflow-x: auto; /* Enables horizontal scroll */
  white-space: nowrap; /* Prevent wrapping */
}

table {
  table-layout: fixed; /* Keeps columns fixed */
  width: 100%;
}

td, th {
  white-space: nowrap; /* Prevents text wrap */
  overflow: hidden;
  text-overflow: ellipsis; /* Add ... for long text */
}

td input.form-control {
  width: 100%; /* Makes input fit cell */
  min-width: 150px; /* Set a minimum width */
}

</style><div class="card mb-4 p-3">
  <h4 class="text-center mb-3">Business Associates</h4>

  <!-- Alert -->
  <div class="alert mt-2" *ngIf="associateMessage"
       [ngClass]="{'alert-success': associateMessageType === 'success', 'alert-danger': associateMessageType === 'error'}">
    {{ associateMessage }}
  </div>

  <!-- Add Form -->
  <form (ngSubmit)="addAssociate()" #form="ngForm" novalidate class="mb-3">
    <div class="row">
      <div class="col">
        <input name="Name" [(ngModel)]="newAssociate.Name" placeholder="Name" required class="form-control" />
      </div>
      <div class="col">
        <input name="Link" [(ngModel)]="newAssociate.Link" placeholder="Link" required class="form-control" />
      </div>
      <div class="col-auto">
        <button type="submit" class="btn btn-success" [disabled]="form.invalid">Add</button>
      </div>
    </div>
  </form>

  <!-- Table -->
  <div *ngIf="businessAssociates.length > 0; else noData">
    <div class="table-responsive">
      <table class="table table-bordered table-striped">
        <thead class="thead-light">
          <tr>
            <th class="fw-bold">S.No</th>
            <th class="fw-bold">Name</th>
            <th  style="width: 50%;" class="fw-bold">Link</th>
            <th class="fw-bold">Actions</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let item of businessAssociates; index as i">
            <td>{{ i + 1 }}</td>
            <td>
              <span *ngIf="!item.isEditing">{{ item.Name }}</span>
              <input *ngIf="item.isEditing" [(ngModel)]="item.editName" class="form-control" />
            </td>
            <td>
              <span *ngIf="!item.isEditing">{{ item.Link }}</span>
              <input *ngIf="item.isEditing" [(ngModel)]="item.editLink" class="form-control" />
            </td>
           <td>
  <ng-container *ngIf="!item.isEditing; else editButtons">
    <button class="btn btn-primary btn-sm me-2" (click)="startEdit(item)">Edit</button>
    <button class="btn btn-danger btn-sm" (click)="confirmDelete(item.AssociateID)">Delete</button>
  </ng-container>

  <ng-template #editButtons>
    <button class="btn btn-success btn-sm me-2" (click)="saveEdit(item)">Save</button>
    <button class="btn btn-secondary btn-sm" (click)="cancelEdit(item)">Cancel</button>
  </ng-template>
</td>

          </tr>
        </tbody>
      </table>
    </div>
  </div>

  <ng-template #noData>
    <p>No business associates found.</p>
  </ng-template>
</div>

<!-- Bootstrap Delete Confirmation Modal -->
<div class="modal fade" id="deletebusinessConfirmModal" tabindex="-1">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content border-0 shadow">
      <div class="modal-header bg-light">
        <h5 class="modal-title">üóëÔ∏è Confirm Delete</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
      </div>
      <div class="modal-body text-center">
        Are you sure you want to delete this associate?
      </div>
      <div class="modal-footer justify-content-center">
        <button type="button" class="btn btn-outline-secondary btn-sm px-4" data-bs-dismiss="modal">Cancel</button>
        <button type="button" class="btn btn-danger btn-sm" (click)="deleteConfirmed()">Yes, Delete</button>
      </div>
    </div>
  </div>
</div>
